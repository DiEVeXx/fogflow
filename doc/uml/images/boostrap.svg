<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="417px" preserveAspectRatio="none" style="width:1004px;height:417px;" version="1.1" viewBox="0 0 1004 417" width="1004px" zoomAndPan="magnify"><defs><filter height="300%" id="f18wros1s31m0b" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="248" x="378.75" y="22.9951">"Bootstrap of a new Discovery"</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="65" x2="65" y1="68.5938" y2="376.7891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="256.5" x2="256.5" y1="68.5938" y2="376.7891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="385.5" x2="385.5" y1="68.5938" y2="376.7891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="523.5" x2="523.5" y1="68.5938" y2="376.7891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="672.5" x2="672.5" y1="68.5938" y2="376.7891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="935.5" x2="935.5" y1="68.5938" y2="376.7891"/><rect fill="#FEFECE" filter="url(#f18wros1s31m0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="8" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="15" y="53.292">NewDiscovery</text><rect fill="#FEFECE" filter="url(#f18wros1s31m0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="8" y="375.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="15" y="395.7842">NewDiscovery</text><rect fill="#FEFECE" filter="url(#f18wros1s31m0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="199.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="206.5" y="53.292">TaskDesigner</text><rect fill="#FEFECE" filter="url(#f18wros1s31m0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="199.5" y="375.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="206.5" y="395.7842">TaskDesigner</text><rect fill="#FEFECE" filter="url(#f18wros1s31m0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="323.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="330.5" y="53.292">CloudDiscovery</text><rect fill="#FEFECE" filter="url(#f18wros1s31m0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="323.5" y="375.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="330.5" y="395.7842">CloudDiscovery</text><rect fill="#FEFECE" filter="url(#f18wros1s31m0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="458.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="465.5" y="53.292">ParentDiscovery</text><rect fill="#FEFECE" filter="url(#f18wros1s31m0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="458.5" y="375.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="465.5" y="395.7842">ParentDiscovery</text><rect fill="#FEFECE" filter="url(#f18wros1s31m0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="598.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="605.5" y="53.292">NeighborDiscovery</text><rect fill="#FEFECE" filter="url(#f18wros1s31m0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="598.5" y="375.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="605.5" y="395.7842">NeighborDiscovery</text><rect fill="#FEFECE" filter="url(#f18wros1s31m0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="873.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="880.5" y="53.292">OtherDiscovery</text><rect fill="#FEFECE" filter="url(#f18wros1s31m0b)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="873.5" y="375.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="880.5" y="395.7842">OtherDiscovery</text><polygon fill="#A80036" points="244.5,95.7266,254.5,99.7266,244.5,103.7266,248.5,99.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="65.5" x2="250.5" y1="99.7266" y2="99.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="72.5" y="94.6606">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="85.5" y="94.6606">HTTP request /sitelist</text><polygon fill="#A80036" points="76.5,124.8594,66.5,128.8594,76.5,132.8594,72.5,128.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="70.5" x2="255.5" y1="128.8594" y2="128.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="82.5" y="123.7935">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="95.5" y="123.7935">list_of_cloud_site</text><polygon fill="#A80036" points="374,153.9922,384,157.9922,374,161.9922,378,157.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="65.5" x2="380" y1="157.9922" y2="157.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="72.5" y="152.9263">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="85.5" y="152.9263">REST GET /routingtab</text><polygon fill="#A80036" points="76.5,183.125,66.5,187.125,76.5,191.125,72.5,187.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="70.5" x2="385" y1="187.125" y2="187.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="82.5" y="182.0591">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="95.5" y="182.0591">a copy of the current routing tables</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="65.5" x2="107.5" y1="216.2578" y2="216.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107.5" x2="107.5" y1="216.2578" y2="229.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="107.5" y1="229.2578" y2="229.2578"/><polygon fill="#A80036" points="76.5,225.2578,66.5,229.2578,76.5,233.2578,72.5,229.2578" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="72.5" y="211.1919">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="85.5" y="211.1919">update the routing tables</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="65.5" x2="107.5" y1="258.3906" y2="258.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="107.5" x2="107.5" y1="258.3906" y2="271.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66.5" x2="107.5" y1="271.3906" y2="271.3906"/><polygon fill="#A80036" points="76.5,267.3906,66.5,271.3906,76.5,275.3906,72.5,271.3906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="72.5" y="253.3247">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="85.5" y="253.3247">select its direct neighbors</text><polygon fill="#A80036" points="511.5,296.5234,521.5,300.5234,511.5,304.5234,515.5,300.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="65.5" x2="517.5" y1="300.5234" y2="300.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="72.5" y="295.4575">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="85.5" y="295.4575">annouce my info (siteInfo, geohash)</text><polygon fill="#A80036" points="660.5,325.6563,670.5,329.6563,660.5,333.6563,664.5,329.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="65.5" x2="666.5" y1="329.6563" y2="329.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="72.5" y="324.5903">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="85.5" y="324.5903">annouce my info (siteInfo, geohash)</text><polygon fill="#A80036" points="923.5,354.7891,933.5,358.7891,923.5,362.7891,927.5,358.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="523.5" x2="929.5" y1="358.7891" y2="358.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="530.5" y="353.7231">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="375" x="543.5" y="353.7231">forward the announcement to its parent and other children</text><!--
@startuml
title "Bootstrap of a new Discovery"

autonumber

NewDiscovery -> TaskDesigner :  HTTP request /sitelist
TaskDesigner -> NewDiscovery: list_of_cloud_site

NewDiscovery -> CloudDiscovery: REST GET /routingtab
CloudDiscovery -> NewDiscovery: a copy of the current routing tables

NewDiscovery -> NewDiscovery: update the routing tables
NewDiscovery -> NewDiscovery: select its direct neighbors

NewDiscovery -> ParentDiscovery: annouce my info (siteInfo, geohash)
NewDiscovery -> NeighborDiscovery: annouce my info (siteInfo, geohash)
ParentDiscovery -> OtherDiscovery: forward the announcement to its parent and other children
@enduml

PlantUML version 1.2018.09(Fri Jul 27 16:58:18 UTC 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>